var S3Client, _, crypto, mime, moment,
  indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

_ = require('lodash');

mime = require('mime');

moment = require('moment');

crypto = require('crypto');

S3Client = (function() {
  function S3Client(options, arrAllowedDataExtensions) {
    var aws;
    if (options == null) {
      options = {};
    }
    aws = require('aws-sdk');
    if (!(options instanceof aws.Config)) {
      this._checkOptions(options);
    }
    aws.config.update(options);
    this.s3 = new aws.S3();
    this.arrAllowedDataExtensions = null;
    if (arrAllowedDataExtensions && this._checkAllowedDataExtensions(arrAllowedDataExtensions)) {
      this.arrAllowedDataExtensions = arrAllowedDataExtensions;
    }
  }

  S3Client.prototype.uploadPostForm = function(options, cb) {
    var acl, algorithm, arrAlgorithm, bucket, contentLength, contentType, dateKey, dateLongPolicy, dateRegionKey, dateRegionServiceKey, dateShortPolicy, expires, extension, hashalg, key, policy, policyDoc, ref, ref1, ref2, ref3, ref4, ref5, region, metaData, signature, signingKey, sigver, stream;
    if (options == null) {
      options = {};
    }
    if (!cb) {
      throw new Error('Callback is required');
    }
    extension = options.extension, key = options.key, bucket = options.bucket, expires = options.expires, acl = options.acl, contentLength = options.contentLength, algorithm = options.algorithm, region = options.region, metaData = options.metaData || [];
    key = options.key;
    bucket = options.bucket;
    extension = (ref = options.extension) != null ? ref : null;
    expires = (ref1 = options.expires) != null ? ref1 : moment.utc().add(60, 'minutes').toDate();
    acl = (ref2 = options.acl) != null ? ref2 : 'public-read';
    contentLength = (ref3 = options.contentLength) != null ? ref3 : null;
    algorithm = (ref4 = options.algorithm) != null ? ref4 : 'AWS4-HMAC-SHA256';
    region = (ref5 = options.region) != null ? ref5 : this.region;
    if (!(key && bucket)) {
      return cb(new Error('key and bucket are required'));
    }
    if (extension) {
      contentType = this._checkDataExtension(extension);
      if (!contentType) {
        return cb(new Error('Data extension not allowed'));
      }
    }
    if (algorithm.split('-').length === 3) {
      arrAlgorithm = algorithm.split('-');
      sigver = arrAlgorithm[0];
      hashalg = arrAlgorithm[2].toLowerCase();
    } else {
      sigver = "AWS4";
      hashalg = "sha256";
    }
    policyDoc = {};
    if (expires && _.isDate(expires)) {
      policyDoc["expiration"] = moment.utc(expires).format("YYYY-MM-DD[T]HH:MM:SS[Z]");
    }
    policyDoc["conditions"] = [];
    dateShortPolicy = moment.utc().format('YYYYMMDD');
    dateLongPolicy = moment.utc().format('YYYYMMDD[T]HHMMSS[Z]');
    policyDoc.conditions.push({
      'bucket': bucket
    });
    policyDoc.conditions.push(['starts-with', '$key', key]);
    policyDoc.conditions.push({
      'acl': acl
    });
    if (contentType) {
      policyDoc.conditions.push(['starts-with', '$Content-Type', contentType]);
    }
    if (contentLength) {
      policyDoc.conditions.push(['content-length-range', 0, contentLength]);
    }
    policyDoc.conditions.push({
      "x-amz-algorithm": algorithm
    });
    policyDoc.conditions.push({
      "x-amz-credential": this.accessKeyId + "/" + dateShortPolicy + "/" + region + "/s3/aws4_request"
    });
    policyDoc.conditions.push({
      "x-amz-date": dateLongPolicy
    });
    metaData.forEach(function(metaDataElement) {policyDoc.conditions.push(["starts-with", "$x-amz-meta-".concat(metaDataElement), ""])});    
    dateKey = crypto.createHmac(hashalg, "" + sigver + this.secretAccessKey).update(dateShortPolicy).digest();
    dateRegionKey = crypto.createHmac(hashalg, dateKey).update(region).digest();
    dateRegionServiceKey = crypto.createHmac(hashalg, dateRegionKey).update('s3').digest();
    signingKey = crypto.createHmac(hashalg, dateRegionServiceKey).update((sigver.toLowerCase()) + "_request").digest();
    policy = new Buffer(JSON.stringify(policyDoc)).toString('base64');
    signature = crypto.createHmac(hashalg, signingKey).update(policy).digest('hex');
    stream = {};
    stream['params'] = {
      "key": key,
      "acl": acl,
      "x-amz-algorithm": algorithm,
      "x-amz-credential": this.accessKeyId + "/" + dateShortPolicy + "/" + region + "/s3/" + (sigver.toLowerCase()) + "_request",
      "x-amz-date": dateLongPolicy,
      "policy": policy,
      "x-amz-signature": signature
    };
    if (contentType) {
      stream.params['content-type'] = contentType;
    }
    stream['public_url'] = "https://" + bucket + ".s3.amazonaws.com/" + key;
    stream['form_url'] = "https://" + bucket + ".s3.amazonaws.com/";
    return cb(null, stream);
  };

  S3Client.prototype.upload = function(options, cb) {
    var acl, bucket, contentLength, contentType, data, expires, extension, key, params, ref, ref1, ref2, ref3;
    if (options == null) {
      options = {};
    }
    if (!cb) {
      throw new Error('Callback is required');
    }
    data = options.data, extension = options.extension, key = options.key, bucket = options.bucket, expires = options.expires, acl = options.acl, contentLength = options.contentLength;
    data = options.data;
    key = options.key;
    bucket = options.bucket;
    extension = (ref = options.extension) != null ? ref : null;
    expires = (ref1 = options.expires) != null ? ref1 : null;
    acl = (ref2 = options.acl) != null ? ref2 : null;
    contentLength = (ref3 = options.contentLength) != null ? ref3 : null;
    if (!(data && key && bucket)) {
      return cb(new Error('data, key and bucket are required'));
    }
    params = {
      Bucket: bucket,
      Key: key,
      Body: data
    };
    if (extension) {
      contentType = this._checkDataExtension(extension);
      if (!contentType) {
        return cb(new Error('Data extension not allowed'));
      }
      params["ContentType"] = contentType;
    }
    if (expires && _.isDate(expires)) {
      params["Expires"] = moment.utc(expires);
    }
    if (acl) {
      params["ACL"] = acl;
    }
    if (contentLength) {
      params["ContentLength"] = contentLength;
    }
    return this.s3.upload(params, function(err, data) {
      if (err) {
        return cb(err);
      }
      return cb(null, "https://" + bucket + ".s3.amazonaws.com/" + key);
    });
  };

  S3Client.prototype.put = function(options, cb) {
    var acl, bucket, contentLength, contentType, expires, extension, key, params, ref, ref1, ref2;
    if (options == null) {
      options = {};
    }
    if (!cb) {
      throw new Error('Callback is required');
    }
    extension = options.extension, key = options.key, bucket = options.bucket, expires = options.expires, acl = options.acl, contentLength = options.contentLength;
    key = options.key;
    bucket = options.bucket;
    extension = (ref = options.extension) != null ? ref : null;
    expires = (ref1 = options.expires) != null ? ref1 : null;
    acl = (ref2 = options.acl) != null ? ref2 : null;
    if (!(key && bucket)) {
      return cb(new Error('key and bucket are required'));
    }
    params = {
      Bucket: bucket,
      Key: key
    };
    if (extension) {
      contentType = this._checkDataExtension(extension);
      if (!contentType) {
        return cb(new Error('Data extension not allowed'));
      }
      params["ContentType"] = contentType;
    }
    if (expires && _.isDate(expires)) {
      params["Expires"] = moment.utc(expires);
    }
    if (acl) {
      params["ACL"] = acl;
    }
    return this.s3.getSignedUrl("putObject", params, function(err, data) {
      var put;
      if (err) {
        return cb(err);
      }
      put = {
        'signed_url': data,
        'public_url': "https://" + bucket + ".s3.amazonaws.com/" + key
      };
      return cb(null, put);
    });
  };

  S3Client.prototype._checkDataExtension = function(dataExtension) {
    if (!dataExtension || (this.arrAllowedDataExtensions && indexOf.call(this.arrAllowedDataExtensions, dataExtension) < 0)) {
      return false;
    }
    return mime.lookup(dataExtension);
  };

  S3Client.prototype._checkAllowedDataExtensions = function(arrAllowedDataExtensions) {
    var ext;
    if (!arrAllowedDataExtensions) {
      return false;
    }
    if (!_.isArray(arrAllowedDataExtensions)) {
      throw new Error("Allowed data extensions must be array of strings");
    }
    for (ext in arrAllowedDataExtensions) {
      if (!_.isString(ext)) {
        throw new Error("Extensions must be a strings");
      }
    }
    return true;
  };

  S3Client.prototype._checkOptions = function(options) {
    if (options == null) {
      options = {};
    }
    this.accessKeyId = options.accessKeyId, this.secretAccessKey = options.secretAccessKey, this.region = options.region, this.signatureVersion = options.signatureVersion, this.maxRetries = options.maxRetries, this.maxRedirects = options.maxRedirects, this.systemClockOffset = options.systemClockOffset, this.sslEnabled = options.sslEnabled, this.paramValidation = options.paramValidation, this.computeChecksums = options.computeChecksums, this.convertResponseTypes = options.convertResponseTypes, this.s3ForcePathStyle = options.s3ForcePathStyle, this.s3BucketEndpoint = options.s3BucketEndpoint, this.apiVersion = options.apiVersion, this.httpOptions = options.httpOptions, this.apiVersions = options.apiVersions, this.sessionToken = options.sessionToken, this.credentials = options.credentials, this.credentialProvider = options.credentialProvider, this.logger = options.logger;
    if (!this.accessKeyId) {
      throw new Error("accessKeyId is required");
    }
    if (!this.secretAccessKey) {
      throw new Error("secretAccessKey is required");
    }
    if (!this.region) {
      throw new Error("region is required");
    }
    if (!_.isString(this.accessKeyId)) {
      throw new Error("accessKeyId must be a string");
    }
    if (!_.isString(this.secretAccessKey)) {
      throw new Error("secretAccessKey must be a string");
    }
    if (!_.isString(this.region)) {
      throw new Error("region must be a string");
    }
    if (this.signatureVersion && !_.isString(this.signatureVersion)) {
      throw new Error("signatureVersion must be a string");
    }
    if (this.maxRetries && !_.isInteger(this.maxRetries)) {
      throw new Error('maxRetries must be a integer');
    }
    if (this.maxRedirects && !_.isInteger(this.maxRedirects)) {
      throw new Error('maxRedirects must be a integer');
    }
    if (this.systemClockOffset && !_.isNumber(this.systemClockOffset)) {
      throw new Error('systemClockOffset must be a number');
    }
    if (this.sslEnabled && !_.isBoolean(this.sslEnabled)) {
      throw new Error('sslEnabled must be a boolean');
    }
    if (this.paramValidation && !_.isBoolean(this.paramValidation)) {
      throw new Error('paramValidation must be a boolean');
    }
    if (this.computeChecksums && !_.isBoolean(this.computeChecksums)) {
      throw new Error('computeChecksums must be a boolean');
    }
    if (this.convertResponseTypes && !_.isBoolean(this.convertResponseTypes)) {
      throw new Error('convertResponseTypes must be a boolean');
    }
    if (this.s3ForcePathStyle && !_.isBoolean(this.s3ForcePathStyle)) {
      throw new Error('s3ForcePathStyle must be a boolean');
    }
    if (this.s3BucketEndpoint && !_.isBoolean(this.s3BucketEndpoint)) {
      throw new Error('s3BucketEndpoint must be a boolean');
    }
    if (this.httpOptions && !_.isPlainObject(this.httpOptions)) {
      throw new Error('httpOptions must be a dict with params: proxy, agent, timeout, xhrAsync, xhrWithCredentials');
    }
    if (this.apiVersions && !_.isPlainObject(this.apiVersions)) {
      throw new Error('apiVersions must be a dict with versions');
    }
    if (this.apiVersion && !(_.isString(this.apiVersion || _.isDate(this.apiVersion)))) {
      throw new Error('apiVersion must be a string or date');
    }
    if (this.sessionToken && !this.sessionToken instanceof aws.Credentials) {
      throw new Error('sessionToken must be a AWS.Credentials');
    }
    if (this.credentials && !this.credentials instanceof aws.Credentials) {
      throw new Error('credentials must be a AWS.Credentials');
    }
    if (this.credentialProvider && !this.credentialProvider instanceof aws.CredentialsProviderChain) {
      throw new Error('credentialProvider must be a AWS.CredentialsProviderChain');
    }
    if (this.logger && !(this.logger.write && this.logger.log)) {
      throw new Error('logger must have #write or #log methods');
    }
  };

  return S3Client;

})();

module.exports = S3Client;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9pbmRleC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsSUFBQSxpQ0FBQTtFQUFBLG1KQUFBOztBQUFBLENBQUEsR0FBVSxPQUFBLENBQVEsUUFBUixDQUFWLENBQUE7O0FBQUEsSUFDQSxHQUFVLE9BQUEsQ0FBUSxNQUFSLENBRFYsQ0FBQTs7QUFBQSxNQUVBLEdBQVUsT0FBQSxDQUFRLFFBQVIsQ0FGVixDQUFBOztBQUFBLE1BR0EsR0FBVSxPQUFBLENBQVEsUUFBUixDQUhWLENBQUE7O0FBQUE7QUFPZSxFQUFBLGtCQUFDLE9BQUQsRUFBZSx3QkFBZixHQUFBO0FBQ1gsUUFBQSxHQUFBOztNQURZLFVBQVU7S0FDdEI7QUFBQSxJQUFBLEdBQUEsR0FBTSxPQUFBLENBQVEsU0FBUixDQUFOLENBQUE7QUFFQSxJQUFBLElBQUEsQ0FBQSxDQUE4QixPQUFBLFlBQW1CLEdBQUcsQ0FBQyxNQUFyRCxDQUFBO0FBQUEsTUFBQSxJQUFDLENBQUEsYUFBRCxDQUFlLE9BQWYsQ0FBQSxDQUFBO0tBRkE7QUFBQSxJQUdBLEdBQUcsQ0FBQyxNQUFNLENBQUMsTUFBWCxDQUFrQixPQUFsQixDQUhBLENBQUE7QUFBQSxJQUtBLElBQUMsQ0FBQSxFQUFELEdBQVUsSUFBQSxHQUFHLENBQUMsRUFBSixDQUFBLENBTFYsQ0FBQTtBQUFBLElBT0EsSUFBQyxDQUFBLHdCQUFELEdBQTRCLElBUDVCLENBQUE7QUFRQSxJQUFBLElBQUcsd0JBQUEsSUFBNkIsSUFBQyxDQUFBLDJCQUFELENBQTZCLHdCQUE3QixDQUFoQztBQUNFLE1BQUEsSUFBQyxDQUFBLHdCQUFELEdBQTRCLHdCQUE1QixDQURGO0tBVFc7RUFBQSxDQUFiOztBQUFBLHFCQWNBLGNBQUEsR0FBZ0IsU0FBQyxPQUFELEVBQWUsRUFBZixHQUFBO0FBQ2QsUUFBQSxzUkFBQTs7TUFEZSxVQUFVO0tBQ3pCO0FBQUEsSUFBQSxJQUFBLENBQUEsRUFBQTtBQUFBLFlBQVUsSUFBQSxLQUFBLENBQU0sc0JBQU4sQ0FBVixDQUFBO0tBQUE7QUFBQSxJQUNFLG9CQUFBLFNBQUYsRUFBYSxjQUFBLEdBQWIsRUFBa0IsaUJBQUEsTUFBbEIsRUFBMEIsa0JBQUEsT0FBMUIsRUFBbUMsY0FBQSxHQUFuQyxFQUF3Qyx3QkFBQSxhQUF4QyxFQUF1RCxvQkFBQSxTQUF2RCxFQUFrRSxpQkFBQSxNQURsRSxDQUFBO0FBQUEsSUFFQSxHQUFBLEdBQU0sT0FBTyxDQUFDLEdBRmQsQ0FBQTtBQUFBLElBR0EsTUFBQSxHQUFTLE9BQU8sQ0FBQyxNQUhqQixDQUFBO0FBQUEsSUFJQSxTQUFBLDZDQUFnQyxJQUpoQyxDQUFBO0FBQUEsSUFLQSxPQUFBLDZDQUE0QixNQUFNLENBQUMsR0FBUCxDQUFBLENBQVksQ0FBQyxHQUFiLENBQWlCLEVBQWpCLEVBQXFCLFNBQXJCLENBQStCLENBQUMsTUFBaEMsQ0FBQSxDQUw1QixDQUFBO0FBQUEsSUFNQSxHQUFBLHlDQUFvQixhQU5wQixDQUFBO0FBQUEsSUFPQSxhQUFBLG1EQUF3QyxJQVB4QyxDQUFBO0FBQUEsSUFRQSxTQUFBLCtDQUFnQyxrQkFSaEMsQ0FBQTtBQUFBLElBU0EsTUFBQSw0Q0FBMEIsSUFBQyxDQUFBLE1BVDNCLENBQUE7QUFZQSxJQUFBLElBQUEsQ0FBQSxDQUFPLEdBQUEsSUFBUSxNQUFmLENBQUE7QUFDRSxhQUFPLEVBQUEsQ0FBTyxJQUFBLEtBQUEsQ0FBTSw2QkFBTixDQUFQLENBQVAsQ0FERjtLQVpBO0FBZUEsSUFBQSxJQUFHLFNBQUg7QUFDRSxNQUFBLFdBQUEsR0FBYyxJQUFDLENBQUEsbUJBQUQsQ0FBcUIsU0FBckIsQ0FBZCxDQUFBO0FBQ0EsTUFBQSxJQUFBLENBQUEsV0FBQTtBQUFBLGVBQU8sRUFBQSxDQUFPLElBQUEsS0FBQSxDQUFNLDRCQUFOLENBQVAsQ0FBUCxDQUFBO09BRkY7S0FmQTtBQW1CQSxJQUFBLElBQUcsU0FBUyxDQUFDLEtBQVYsQ0FBZ0IsR0FBaEIsQ0FBb0IsQ0FBQyxNQUFyQixLQUErQixDQUFsQztBQUNFLE1BQUEsWUFBQSxHQUFlLFNBQVMsQ0FBQyxLQUFWLENBQWdCLEdBQWhCLENBQWYsQ0FBQTtBQUFBLE1BQ0EsTUFBQSxHQUFTLFlBQWEsQ0FBQSxDQUFBLENBRHRCLENBQUE7QUFBQSxNQUVBLE9BQUEsR0FBVSxZQUFhLENBQUEsQ0FBQSxDQUFFLENBQUMsV0FBaEIsQ0FBQSxDQUZWLENBREY7S0FBQSxNQUFBO0FBS0UsTUFBQSxNQUFBLEdBQVMsTUFBVCxDQUFBO0FBQUEsTUFDQSxPQUFBLEdBQVUsUUFEVixDQUxGO0tBbkJBO0FBQUEsSUEyQkEsU0FBQSxHQUFZLEVBM0JaLENBQUE7QUE2QkEsSUFBQSxJQUFvRixPQUFBLElBQVksQ0FBQyxDQUFDLE1BQUYsQ0FBUyxPQUFULENBQWhHO0FBQUEsTUFBQSxTQUFVLENBQUEsWUFBQSxDQUFWLEdBQTBCLE1BQU0sQ0FBQyxHQUFQLENBQVcsT0FBWCxDQUFtQixDQUFDLE1BQXBCLENBQTJCLDBCQUEzQixDQUExQixDQUFBO0tBN0JBO0FBQUEsSUE4QkEsU0FBVSxDQUFBLFlBQUEsQ0FBVixHQUEwQixFQTlCMUIsQ0FBQTtBQUFBLElBZ0NBLGVBQUEsR0FBa0IsTUFBTSxDQUFDLEdBQVAsQ0FBQSxDQUFZLENBQUMsTUFBYixDQUFvQixVQUFwQixDQWhDbEIsQ0FBQTtBQUFBLElBaUNBLGNBQUEsR0FBaUIsTUFBTSxDQUFDLEdBQVAsQ0FBQSxDQUFZLENBQUMsTUFBYixDQUFvQixzQkFBcEIsQ0FqQ2pCLENBQUE7QUFBQSxJQW1DQSxTQUFTLENBQUMsVUFBVSxDQUFDLElBQXJCLENBQTBCO0FBQUEsTUFBRSxRQUFBLEVBQVUsTUFBWjtLQUExQixDQW5DQSxDQUFBO0FBQUEsSUFvQ0EsU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFyQixDQUEwQixDQUFFLGFBQUYsRUFBaUIsTUFBakIsRUFBeUIsR0FBekIsQ0FBMUIsQ0FwQ0EsQ0FBQTtBQUFBLElBcUNBLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBckIsQ0FBMEI7QUFBQSxNQUFFLEtBQUEsRUFBTyxHQUFUO0tBQTFCLENBckNBLENBQUE7QUFzQ0EsSUFBQSxJQUE2RSxXQUE3RTtBQUFBLE1BQUEsU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFyQixDQUEwQixDQUFFLGFBQUYsRUFBaUIsZUFBakIsRUFBa0MsV0FBbEMsQ0FBMUIsQ0FBQSxDQUFBO0tBdENBO0FBdUNBLElBQUEsSUFBMEUsYUFBMUU7QUFBQSxNQUFBLFNBQVMsQ0FBQyxVQUFVLENBQUMsSUFBckIsQ0FBMEIsQ0FBRSxzQkFBRixFQUEwQixDQUExQixFQUE2QixhQUE3QixDQUExQixDQUFBLENBQUE7S0F2Q0E7QUFBQSxJQXdDQSxTQUFTLENBQUMsVUFBVSxDQUFDLElBQXJCLENBQTBCO0FBQUEsTUFBRSxpQkFBQSxFQUFtQixTQUFyQjtLQUExQixDQXhDQSxDQUFBO0FBQUEsSUF5Q0EsU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFyQixDQUEwQjtBQUFBLE1BQUUsa0JBQUEsRUFBdUIsSUFBQyxDQUFBLFdBQUYsR0FBYyxHQUFkLEdBQWlCLGVBQWpCLEdBQWlDLEdBQWpDLEdBQW9DLE1BQXBDLEdBQTJDLGtCQUFuRTtLQUExQixDQXpDQSxDQUFBO0FBQUEsSUEwQ0EsU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFyQixDQUEwQjtBQUFBLE1BQUUsWUFBQSxFQUFjLGNBQWhCO0tBQTFCLENBMUNBLENBQUE7QUFBQSxJQTRDQSxPQUFBLEdBQVUsTUFBTSxDQUFDLFVBQVAsQ0FBa0IsT0FBbEIsRUFBMkIsRUFBQSxHQUFHLE1BQUgsR0FBWSxJQUFDLENBQUEsZUFBeEMsQ0FBMEQsQ0FBQyxNQUEzRCxDQUFrRSxlQUFsRSxDQUFrRixDQUFDLE1BQW5GLENBQUEsQ0E1Q1YsQ0FBQTtBQUFBLElBNkNBLGFBQUEsR0FBZ0IsTUFBTSxDQUFDLFVBQVAsQ0FBa0IsT0FBbEIsRUFBMkIsT0FBM0IsQ0FBbUMsQ0FBQyxNQUFwQyxDQUEyQyxNQUEzQyxDQUFrRCxDQUFDLE1BQW5ELENBQUEsQ0E3Q2hCLENBQUE7QUFBQSxJQThDQSxvQkFBQSxHQUF1QixNQUFNLENBQUMsVUFBUCxDQUFrQixPQUFsQixFQUEyQixhQUEzQixDQUF5QyxDQUFDLE1BQTFDLENBQWlELElBQWpELENBQXNELENBQUMsTUFBdkQsQ0FBQSxDQTlDdkIsQ0FBQTtBQUFBLElBK0NBLFVBQUEsR0FBYSxNQUFNLENBQUMsVUFBUCxDQUFrQixPQUFsQixFQUEyQixvQkFBM0IsQ0FBZ0QsQ0FBQyxNQUFqRCxDQUEwRCxDQUFDLE1BQU0sQ0FBQyxXQUFQLENBQUEsQ0FBRCxDQUFBLEdBQXNCLFVBQWhGLENBQTBGLENBQUMsTUFBM0YsQ0FBQSxDQS9DYixDQUFBO0FBQUEsSUFnREEsTUFBQSxHQUFhLElBQUEsTUFBQSxDQUFPLElBQUksQ0FBQyxTQUFMLENBQWUsU0FBZixDQUFQLENBQWlDLENBQUMsUUFBbEMsQ0FBMkMsUUFBM0MsQ0FoRGIsQ0FBQTtBQUFBLElBaURBLFNBQUEsR0FBWSxNQUFNLENBQUMsVUFBUCxDQUFrQixPQUFsQixFQUEwQixVQUExQixDQUFxQyxDQUFDLE1BQXRDLENBQTZDLE1BQTdDLENBQW9ELENBQUMsTUFBckQsQ0FBNEQsS0FBNUQsQ0FqRFosQ0FBQTtBQUFBLElBbURBLE1BQUEsR0FBUyxFQW5EVCxDQUFBO0FBQUEsSUFvREEsTUFBTyxDQUFBLFFBQUEsQ0FBUCxHQUNFO0FBQUEsTUFBQSxLQUFBLEVBQU8sR0FBUDtBQUFBLE1BQ0EsS0FBQSxFQUFPLEdBRFA7QUFBQSxNQUVBLGlCQUFBLEVBQW1CLFNBRm5CO0FBQUEsTUFHQSxrQkFBQSxFQUF1QixJQUFDLENBQUEsV0FBRixHQUFjLEdBQWQsR0FBaUIsZUFBakIsR0FBaUMsR0FBakMsR0FBb0MsTUFBcEMsR0FBMkMsTUFBM0MsR0FBZ0QsQ0FBQyxNQUFNLENBQUMsV0FBUCxDQUFBLENBQUQsQ0FBaEQsR0FBc0UsVUFINUY7QUFBQSxNQUlBLFlBQUEsRUFBYyxjQUpkO0FBQUEsTUFLQSxRQUFBLEVBQVUsTUFMVjtBQUFBLE1BTUEsaUJBQUEsRUFBbUIsU0FObkI7S0FyREYsQ0FBQTtBQTREQSxJQUFBLElBQStDLFdBQS9DO0FBQUEsTUFBQSxNQUFNLENBQUMsTUFBTyxDQUFBLGNBQUEsQ0FBZCxHQUFnQyxXQUFoQyxDQUFBO0tBNURBO0FBQUEsSUE2REEsTUFBTyxDQUFBLFlBQUEsQ0FBUCxHQUF1QixVQUFBLEdBQVcsTUFBWCxHQUFrQixvQkFBbEIsR0FBc0MsR0E3RDdELENBQUE7QUFBQSxJQThEQSxNQUFPLENBQUEsVUFBQSxDQUFQLEdBQXFCLFVBQUEsR0FBVyxNQUFYLEdBQWtCLG9CQTlEdkMsQ0FBQTtXQWdFQSxFQUFBLENBQUcsSUFBSCxFQUFTLE1BQVQsRUFqRWM7RUFBQSxDQWRoQixDQUFBOztBQUFBLHFCQW1GQSxNQUFBLEdBQVEsU0FBQyxPQUFELEVBQWUsRUFBZixHQUFBO0FBQ04sUUFBQSxxR0FBQTs7TUFETyxVQUFVO0tBQ2pCO0FBQUEsSUFBQSxJQUFBLENBQUEsRUFBQTtBQUFBLFlBQVUsSUFBQSxLQUFBLENBQU0sc0JBQU4sQ0FBVixDQUFBO0tBQUE7QUFBQSxJQUNFLGVBQUEsSUFBRixFQUFRLG9CQUFBLFNBQVIsRUFBbUIsY0FBQSxHQUFuQixFQUF3QixpQkFBQSxNQUF4QixFQUFnQyxrQkFBQSxPQUFoQyxFQUF5QyxjQUFBLEdBQXpDLEVBQThDLHdCQUFBLGFBRDlDLENBQUE7QUFBQSxJQUVBLElBQUEsR0FBTyxPQUFPLENBQUMsSUFGZixDQUFBO0FBQUEsSUFHQSxHQUFBLEdBQU0sT0FBTyxDQUFDLEdBSGQsQ0FBQTtBQUFBLElBSUEsTUFBQSxHQUFTLE9BQU8sQ0FBQyxNQUpqQixDQUFBO0FBQUEsSUFLQSxTQUFBLDZDQUFnQyxJQUxoQyxDQUFBO0FBQUEsSUFNQSxPQUFBLDZDQUE0QixJQU41QixDQUFBO0FBQUEsSUFPQSxHQUFBLHlDQUFvQixJQVBwQixDQUFBO0FBQUEsSUFRQSxhQUFBLG1EQUF3QyxJQVJ4QyxDQUFBO0FBV0EsSUFBQSxJQUFBLENBQUEsQ0FBTyxJQUFBLElBQVMsR0FBVCxJQUFpQixNQUF4QixDQUFBO0FBQ0UsYUFBTyxFQUFBLENBQU8sSUFBQSxLQUFBLENBQU0sbUNBQU4sQ0FBUCxDQUFQLENBREY7S0FYQTtBQUFBLElBY0EsTUFBQSxHQUNFO0FBQUEsTUFBQSxNQUFBLEVBQVEsTUFBUjtBQUFBLE1BQ0EsR0FBQSxFQUFLLEdBREw7QUFBQSxNQUVBLElBQUEsRUFBTSxJQUZOO0tBZkYsQ0FBQTtBQW1CQSxJQUFBLElBQUcsU0FBSDtBQUNFLE1BQUEsV0FBQSxHQUFjLElBQUMsQ0FBQSxtQkFBRCxDQUFxQixTQUFyQixDQUFkLENBQUE7QUFDQSxNQUFBLElBQUEsQ0FBQSxXQUFBO0FBQUEsZUFBTyxFQUFBLENBQU8sSUFBQSxLQUFBLENBQU0sNEJBQU4sQ0FBUCxDQUFQLENBQUE7T0FEQTtBQUFBLE1BRUEsTUFBTyxDQUFBLGFBQUEsQ0FBUCxHQUF3QixXQUZ4QixDQURGO0tBbkJBO0FBd0JBLElBQUEsSUFBMkMsT0FBQSxJQUFZLENBQUMsQ0FBQyxNQUFGLENBQVMsT0FBVCxDQUF2RDtBQUFBLE1BQUEsTUFBTyxDQUFBLFNBQUEsQ0FBUCxHQUFvQixNQUFNLENBQUMsR0FBUCxDQUFXLE9BQVgsQ0FBcEIsQ0FBQTtLQXhCQTtBQXlCQSxJQUFBLElBQXVCLEdBQXZCO0FBQUEsTUFBQSxNQUFPLENBQUEsS0FBQSxDQUFQLEdBQWdCLEdBQWhCLENBQUE7S0F6QkE7QUEwQkEsSUFBQSxJQUEyQyxhQUEzQztBQUFBLE1BQUEsTUFBTyxDQUFBLGVBQUEsQ0FBUCxHQUEwQixhQUExQixDQUFBO0tBMUJBO1dBNEJBLElBQUMsQ0FBQSxFQUFFLENBQUMsTUFBSixDQUFXLE1BQVgsRUFBbUIsU0FBQyxHQUFELEVBQU0sSUFBTixHQUFBO0FBQ2pCLE1BQUEsSUFBaUIsR0FBakI7QUFBQSxlQUFPLEVBQUEsQ0FBRyxHQUFILENBQVAsQ0FBQTtPQUFBO2FBQ0EsRUFBQSxDQUFHLElBQUgsRUFBUyxVQUFBLEdBQVcsTUFBWCxHQUFrQixvQkFBbEIsR0FBc0MsR0FBL0MsRUFGaUI7SUFBQSxDQUFuQixFQTdCTTtFQUFBLENBbkZSLENBQUE7O0FBQUEscUJBc0hBLEdBQUEsR0FBSyxTQUFDLE9BQUQsRUFBZSxFQUFmLEdBQUE7QUFDSCxRQUFBLHlGQUFBOztNQURJLFVBQVU7S0FDZDtBQUFBLElBQUEsSUFBQSxDQUFBLEVBQUE7QUFBQSxZQUFVLElBQUEsS0FBQSxDQUFNLHNCQUFOLENBQVYsQ0FBQTtLQUFBO0FBQUEsSUFDRSxvQkFBQSxTQUFGLEVBQWEsY0FBQSxHQUFiLEVBQWtCLGlCQUFBLE1BQWxCLEVBQTBCLGtCQUFBLE9BQTFCLEVBQW1DLGNBQUEsR0FBbkMsRUFBd0Msd0JBQUEsYUFEeEMsQ0FBQTtBQUFBLElBRUEsR0FBQSxHQUFNLE9BQU8sQ0FBQyxHQUZkLENBQUE7QUFBQSxJQUdBLE1BQUEsR0FBUyxPQUFPLENBQUMsTUFIakIsQ0FBQTtBQUFBLElBSUEsU0FBQSw2Q0FBZ0MsSUFKaEMsQ0FBQTtBQUFBLElBS0EsT0FBQSw2Q0FBNEIsSUFMNUIsQ0FBQTtBQUFBLElBTUEsR0FBQSx5Q0FBb0IsSUFOcEIsQ0FBQTtBQVNBLElBQUEsSUFBQSxDQUFBLENBQU8sR0FBQSxJQUFRLE1BQWYsQ0FBQTtBQUNFLGFBQU8sRUFBQSxDQUFPLElBQUEsS0FBQSxDQUFNLDZCQUFOLENBQVAsQ0FBUCxDQURGO0tBVEE7QUFBQSxJQVlBLE1BQUEsR0FDRTtBQUFBLE1BQUEsTUFBQSxFQUFRLE1BQVI7QUFBQSxNQUNBLEdBQUEsRUFBSyxHQURMO0tBYkYsQ0FBQTtBQWdCQSxJQUFBLElBQUcsU0FBSDtBQUNFLE1BQUEsV0FBQSxHQUFjLElBQUMsQ0FBQSxtQkFBRCxDQUFxQixTQUFyQixDQUFkLENBQUE7QUFDQSxNQUFBLElBQUEsQ0FBQSxXQUFBO0FBQUEsZUFBTyxFQUFBLENBQU8sSUFBQSxLQUFBLENBQU0sNEJBQU4sQ0FBUCxDQUFQLENBQUE7T0FEQTtBQUFBLE1BRUEsTUFBTyxDQUFBLGFBQUEsQ0FBUCxHQUF3QixXQUZ4QixDQURGO0tBaEJBO0FBcUJBLElBQUEsSUFBMkMsT0FBQSxJQUFZLENBQUMsQ0FBQyxNQUFGLENBQVMsT0FBVCxDQUF2RDtBQUFBLE1BQUEsTUFBTyxDQUFBLFNBQUEsQ0FBUCxHQUFvQixNQUFNLENBQUMsR0FBUCxDQUFXLE9BQVgsQ0FBcEIsQ0FBQTtLQXJCQTtBQXNCQSxJQUFBLElBQXVCLEdBQXZCO0FBQUEsTUFBQSxNQUFPLENBQUEsS0FBQSxDQUFQLEdBQWdCLEdBQWhCLENBQUE7S0F0QkE7V0F3QkEsSUFBQyxDQUFBLEVBQUUsQ0FBQyxZQUFKLENBQWlCLFdBQWpCLEVBQThCLE1BQTlCLEVBQXNDLFNBQUMsR0FBRCxFQUFNLElBQU4sR0FBQTtBQUNwQyxVQUFBLEdBQUE7QUFBQSxNQUFBLElBQWlCLEdBQWpCO0FBQUEsZUFBTyxFQUFBLENBQUcsR0FBSCxDQUFQLENBQUE7T0FBQTtBQUFBLE1BRUEsR0FBQSxHQUNFO0FBQUEsUUFBQSxZQUFBLEVBQWMsSUFBZDtBQUFBLFFBQ0EsWUFBQSxFQUFjLFVBQUEsR0FBVyxNQUFYLEdBQWtCLG9CQUFsQixHQUFzQyxHQURwRDtPQUhGLENBQUE7YUFNQSxFQUFBLENBQUcsSUFBSCxFQUFTLEdBQVQsRUFQb0M7SUFBQSxDQUF0QyxFQXpCRztFQUFBLENBdEhMLENBQUE7O0FBQUEscUJBMEpBLG1CQUFBLEdBQXFCLFNBQUMsYUFBRCxHQUFBO0FBQ25CLElBQUEsSUFBZ0IsQ0FBQSxhQUFBLElBQXFCLENBQUMsSUFBQyxDQUFBLHdCQUFELElBQThCLGFBQXFCLElBQUMsQ0FBQSx3QkFBdEIsRUFBQSxhQUFBLEtBQS9CLENBQXJDO0FBQUEsYUFBTyxLQUFQLENBQUE7S0FBQTtBQUNBLFdBQU8sSUFBSSxDQUFDLE1BQUwsQ0FBWSxhQUFaLENBQVAsQ0FGbUI7RUFBQSxDQTFKckIsQ0FBQTs7QUFBQSxxQkFnS0EsMkJBQUEsR0FBNkIsU0FBQyx3QkFBRCxHQUFBO0FBQzNCLFFBQUEsR0FBQTtBQUFBLElBQUEsSUFBQSxDQUFBLHdCQUFBO0FBQUEsYUFBTyxLQUFQLENBQUE7S0FBQTtBQUVBLElBQUEsSUFBQSxDQUFBLENBQVEsQ0FBQyxPQUFGLENBQVUsd0JBQVYsQ0FBUDtBQUNFLFlBQVUsSUFBQSxLQUFBLENBQU0sa0RBQU4sQ0FBVixDQURGO0tBRkE7QUFLQSxTQUFBLCtCQUFBLEdBQUE7QUFDRSxNQUFBLElBQUEsQ0FBQSxDQUFRLENBQUMsUUFBRixDQUFXLEdBQVgsQ0FBUDtBQUNFLGNBQVUsSUFBQSxLQUFBLENBQU0sOEJBQU4sQ0FBVixDQURGO09BREY7QUFBQSxLQUxBO0FBU0EsV0FBTyxJQUFQLENBVjJCO0VBQUEsQ0FoSzdCLENBQUE7O0FBQUEscUJBOEtBLGFBQUEsR0FBZSxTQUFDLE9BQUQsR0FBQTs7TUFBQyxVQUFVO0tBQ3hCO0FBQUEsSUFDRSxJQUFDLENBQUEsc0JBQUEsV0FESCxFQUNnQixJQUFDLENBQUEsMEJBQUEsZUFEakIsRUFDa0MsSUFBQyxDQUFBLGlCQUFBLE1BRG5DLEVBQzJDLElBQUMsQ0FBQSwyQkFBQSxnQkFENUMsRUFDOEQsSUFBQyxDQUFBLHFCQUFBLFVBRC9ELEVBQzJFLElBQUMsQ0FBQSx1QkFBQSxZQUQ1RSxFQUMwRixJQUFDLENBQUEsNEJBQUEsaUJBRDNGLEVBRUUsSUFBQyxDQUFBLHFCQUFBLFVBRkgsRUFFZSxJQUFDLENBQUEsMEJBQUEsZUFGaEIsRUFFaUMsSUFBQyxDQUFBLDJCQUFBLGdCQUZsQyxFQUVvRCxJQUFDLENBQUEsK0JBQUEsb0JBRnJELEVBRTJFLElBQUMsQ0FBQSwyQkFBQSxnQkFGNUUsRUFFOEYsSUFBQyxDQUFBLDJCQUFBLGdCQUYvRixFQUdFLElBQUMsQ0FBQSxxQkFBQSxVQUhILEVBR2UsSUFBQyxDQUFBLHNCQUFBLFdBSGhCLEVBRzZCLElBQUMsQ0FBQSxzQkFBQSxXQUg5QixFQUcyQyxJQUFDLENBQUEsdUJBQUEsWUFINUMsRUFHMEQsSUFBQyxDQUFBLHNCQUFBLFdBSDNELEVBR3dFLElBQUMsQ0FBQSw2QkFBQSxrQkFIekUsRUFHNkYsSUFBQyxDQUFBLGlCQUFBLE1BSDlGLENBQUE7QUFNQSxJQUFBLElBQUEsQ0FBQSxJQUFRLENBQUEsV0FBUjtBQUNFLFlBQVUsSUFBQSxLQUFBLENBQU0seUJBQU4sQ0FBVixDQURGO0tBTkE7QUFTQSxJQUFBLElBQUEsQ0FBQSxJQUFRLENBQUEsZUFBUjtBQUNFLFlBQVUsSUFBQSxLQUFBLENBQU0sNkJBQU4sQ0FBVixDQURGO0tBVEE7QUFZQSxJQUFBLElBQUEsQ0FBQSxJQUFRLENBQUEsTUFBUjtBQUNFLFlBQVUsSUFBQSxLQUFBLENBQU0sb0JBQU4sQ0FBVixDQURGO0tBWkE7QUFlQSxJQUFBLElBQUEsQ0FBQSxDQUFRLENBQUMsUUFBRixDQUFXLElBQUMsQ0FBQSxXQUFaLENBQVA7QUFDRSxZQUFVLElBQUEsS0FBQSxDQUFNLDhCQUFOLENBQVYsQ0FERjtLQWZBO0FBa0JBLElBQUEsSUFBQSxDQUFBLENBQVEsQ0FBQyxRQUFGLENBQVcsSUFBQyxDQUFBLGVBQVosQ0FBUDtBQUNFLFlBQVUsSUFBQSxLQUFBLENBQU0sa0NBQU4sQ0FBVixDQURGO0tBbEJBO0FBcUJBLElBQUEsSUFBQSxDQUFBLENBQVEsQ0FBQyxRQUFGLENBQVcsSUFBQyxDQUFBLE1BQVosQ0FBUDtBQUNFLFlBQVUsSUFBQSxLQUFBLENBQU0seUJBQU4sQ0FBVixDQURGO0tBckJBO0FBd0JBLElBQUEsSUFBRyxJQUFDLENBQUEsZ0JBQUQsSUFBc0IsQ0FBQSxDQUFLLENBQUMsUUFBRixDQUFXLElBQUMsQ0FBQSxnQkFBWixDQUE3QjtBQUNFLFlBQVUsSUFBQSxLQUFBLENBQU0sbUNBQU4sQ0FBVixDQURGO0tBeEJBO0FBMkJBLElBQUEsSUFBRyxJQUFDLENBQUEsVUFBRCxJQUFnQixDQUFBLENBQUssQ0FBQyxTQUFGLENBQVksSUFBQyxDQUFBLFVBQWIsQ0FBdkI7QUFDRSxZQUFVLElBQUEsS0FBQSxDQUFNLDhCQUFOLENBQVYsQ0FERjtLQTNCQTtBQThCQSxJQUFBLElBQUcsSUFBQyxDQUFBLFlBQUQsSUFBa0IsQ0FBQSxDQUFLLENBQUMsU0FBRixDQUFZLElBQUMsQ0FBQSxZQUFiLENBQXpCO0FBQ0UsWUFBVSxJQUFBLEtBQUEsQ0FBTSxnQ0FBTixDQUFWLENBREY7S0E5QkE7QUFpQ0EsSUFBQSxJQUFHLElBQUMsQ0FBQSxpQkFBRCxJQUF1QixDQUFBLENBQUssQ0FBQyxRQUFGLENBQVcsSUFBQyxDQUFBLGlCQUFaLENBQTlCO0FBQ0UsWUFBVSxJQUFBLEtBQUEsQ0FBTSxvQ0FBTixDQUFWLENBREY7S0FqQ0E7QUFvQ0EsSUFBQSxJQUFHLElBQUMsQ0FBQSxVQUFELElBQWdCLENBQUEsQ0FBSyxDQUFDLFNBQUYsQ0FBWSxJQUFDLENBQUEsVUFBYixDQUF2QjtBQUNFLFlBQVUsSUFBQSxLQUFBLENBQU0sOEJBQU4sQ0FBVixDQURGO0tBcENBO0FBdUNBLElBQUEsSUFBRyxJQUFDLENBQUEsZUFBRCxJQUFxQixDQUFBLENBQUssQ0FBQyxTQUFGLENBQVksSUFBQyxDQUFBLGVBQWIsQ0FBNUI7QUFDRSxZQUFVLElBQUEsS0FBQSxDQUFNLG1DQUFOLENBQVYsQ0FERjtLQXZDQTtBQTBDQSxJQUFBLElBQUcsSUFBQyxDQUFBLGdCQUFELElBQXNCLENBQUEsQ0FBSyxDQUFDLFNBQUYsQ0FBWSxJQUFDLENBQUEsZ0JBQWIsQ0FBN0I7QUFDRSxZQUFVLElBQUEsS0FBQSxDQUFNLG9DQUFOLENBQVYsQ0FERjtLQTFDQTtBQTZDQSxJQUFBLElBQUcsSUFBQyxDQUFBLG9CQUFELElBQTBCLENBQUEsQ0FBSyxDQUFDLFNBQUYsQ0FBWSxJQUFDLENBQUEsb0JBQWIsQ0FBakM7QUFDRSxZQUFVLElBQUEsS0FBQSxDQUFNLHdDQUFOLENBQVYsQ0FERjtLQTdDQTtBQWdEQSxJQUFBLElBQUcsSUFBQyxDQUFBLGdCQUFELElBQXNCLENBQUEsQ0FBSyxDQUFDLFNBQUYsQ0FBWSxJQUFDLENBQUEsZ0JBQWIsQ0FBN0I7QUFDRSxZQUFVLElBQUEsS0FBQSxDQUFNLG9DQUFOLENBQVYsQ0FERjtLQWhEQTtBQW1EQSxJQUFBLElBQUcsSUFBQyxDQUFBLGdCQUFELElBQXNCLENBQUEsQ0FBSyxDQUFDLFNBQUYsQ0FBWSxJQUFDLENBQUEsZ0JBQWIsQ0FBN0I7QUFDRSxZQUFVLElBQUEsS0FBQSxDQUFNLG9DQUFOLENBQVYsQ0FERjtLQW5EQTtBQXNEQSxJQUFBLElBQUcsSUFBQyxDQUFBLFdBQUQsSUFBaUIsQ0FBQSxDQUFLLENBQUMsYUFBRixDQUFnQixJQUFDLENBQUEsV0FBakIsQ0FBeEI7QUFDRSxZQUFVLElBQUEsS0FBQSxDQUFNLDZGQUFOLENBQVYsQ0FERjtLQXREQTtBQXlEQSxJQUFBLElBQUcsSUFBQyxDQUFBLFdBQUQsSUFBaUIsQ0FBQSxDQUFLLENBQUMsYUFBRixDQUFnQixJQUFDLENBQUEsV0FBakIsQ0FBeEI7QUFDRSxZQUFVLElBQUEsS0FBQSxDQUFNLDBDQUFOLENBQVYsQ0FERjtLQXpEQTtBQTREQSxJQUFBLElBQUcsSUFBQyxDQUFBLFVBQUQsSUFBZ0IsQ0FBQSxDQUFLLENBQUMsQ0FBQyxRQUFGLENBQVcsSUFBQyxDQUFBLFVBQUQsSUFBZSxDQUFDLENBQUMsTUFBRixDQUFTLElBQUMsQ0FBQSxVQUFWLENBQTFCLENBQUQsQ0FBdkI7QUFDRSxZQUFVLElBQUEsS0FBQSxDQUFNLHFDQUFOLENBQVYsQ0FERjtLQTVEQTtBQStEQSxJQUFBLElBQUcsSUFBQyxDQUFBLFlBQUQsSUFBa0IsQ0FBQSxJQUFLLENBQUEsWUFBTCxZQUE2QixHQUFHLENBQUMsV0FBdEQ7QUFDRSxZQUFVLElBQUEsS0FBQSxDQUFNLHdDQUFOLENBQVYsQ0FERjtLQS9EQTtBQWtFQSxJQUFBLElBQUcsSUFBQyxDQUFBLFdBQUQsSUFBaUIsQ0FBQSxJQUFLLENBQUEsV0FBTCxZQUE0QixHQUFHLENBQUMsV0FBcEQ7QUFDRSxZQUFVLElBQUEsS0FBQSxDQUFNLHVDQUFOLENBQVYsQ0FERjtLQWxFQTtBQXFFQSxJQUFBLElBQUcsSUFBQyxDQUFBLGtCQUFELElBQXdCLENBQUEsSUFBSyxDQUFBLGtCQUFMLFlBQW1DLEdBQUcsQ0FBQyx3QkFBbEU7QUFDRSxZQUFVLElBQUEsS0FBQSxDQUFNLDJEQUFOLENBQVYsQ0FERjtLQXJFQTtBQXdFQSxJQUFBLElBQUcsSUFBQyxDQUFBLE1BQUQsSUFBWSxDQUFBLENBQUssSUFBQyxDQUFBLE1BQU0sQ0FBQyxLQUFSLElBQWtCLElBQUMsQ0FBQSxNQUFNLENBQUMsR0FBM0IsQ0FBbkI7QUFDRSxZQUFVLElBQUEsS0FBQSxDQUFNLHlDQUFOLENBQVYsQ0FERjtLQXpFYTtFQUFBLENBOUtmLENBQUE7O2tCQUFBOztJQVBGLENBQUE7O0FBQUEsTUFtUU0sQ0FBQyxPQUFQLEdBQWlCLFFBblFqQixDQUFBIiwiZmlsZSI6ImxpYi9pbmRleC5qcyIsInNvdXJjZVJvb3QiOiIvc291cmNlLyIsInNvdXJjZXNDb250ZW50IjpbIiMgczMtYnJvd3Nlci1kaXJlY3QtdXBsb2FkXG5fICAgICAgID0gcmVxdWlyZSgnbG9kYXNoJylcbm1pbWUgICAgPSByZXF1aXJlKCdtaW1lJylcbm1vbWVudCAgPSByZXF1aXJlKCdtb21lbnQnKVxuY3J5cHRvICA9IHJlcXVpcmUoJ2NyeXB0bycpXG5cblxuY2xhc3MgUzNDbGllbnRcbiAgY29uc3RydWN0b3I6IChvcHRpb25zID0ge30sIGFyckFsbG93ZWREYXRhRXh0ZW5zaW9ucykgLT5cbiAgICBhd3MgPSByZXF1aXJlKCdhd3Mtc2RrJylcblxuICAgIEBfY2hlY2tPcHRpb25zIG9wdGlvbnMgdW5sZXNzIG9wdGlvbnMgaW5zdGFuY2VvZiBhd3MuQ29uZmlnXG4gICAgYXdzLmNvbmZpZy51cGRhdGUgb3B0aW9uc1xuXG4gICAgQHMzID0gbmV3IGF3cy5TMygpXG5cbiAgICBAYXJyQWxsb3dlZERhdGFFeHRlbnNpb25zID0gbnVsbFxuICAgIGlmIGFyckFsbG93ZWREYXRhRXh0ZW5zaW9ucyBhbmQgQF9jaGVja0FsbG93ZWREYXRhRXh0ZW5zaW9ucyBhcnJBbGxvd2VkRGF0YUV4dGVuc2lvbnNcbiAgICAgIEBhcnJBbGxvd2VkRGF0YUV4dGVuc2lvbnMgPSBhcnJBbGxvd2VkRGF0YUV4dGVuc2lvbnNcblxuXG4gICMgQnJvd3NlciBmb3JtIHBvc3QgcGFyYW1zIGZvciB1cGxvYWRpbmdcbiAgdXBsb2FkUG9zdEZvcm06IChvcHRpb25zID0ge30sIGNiKSAtPlxuICAgIHRocm93IG5ldyBFcnJvciAnQ2FsbGJhY2sgaXMgcmVxdWlyZWQnIHVubGVzcyBjYlxuICAgIHsgZXh0ZW5zaW9uLCBrZXksIGJ1Y2tldCwgZXhwaXJlcywgYWNsLCBjb250ZW50TGVuZ3RoLCBhbGdvcml0aG0sIHJlZ2lvbiB9ID0gb3B0aW9uc1xuICAgIGtleSA9IG9wdGlvbnMua2V5XG4gICAgYnVja2V0ID0gb3B0aW9ucy5idWNrZXRcbiAgICBleHRlbnNpb24gPSBvcHRpb25zLmV4dGVuc2lvbiA/IG51bGxcbiAgICBleHBpcmVzID0gb3B0aW9ucy5leHBpcmVzID8gbW9tZW50LnV0YygpLmFkZCg2MCwgJ21pbnV0ZXMnKS50b0RhdGUoKVxuICAgIGFjbCA9IG9wdGlvbnMuYWNsID8gJ3B1YmxpYy1yZWFkJ1xuICAgIGNvbnRlbnRMZW5ndGggPSBvcHRpb25zLmNvbnRlbnRMZW5ndGggPyBudWxsXG4gICAgYWxnb3JpdGhtID0gb3B0aW9ucy5hbGdvcml0aG0gPyAnQVdTNC1ITUFDLVNIQTI1NidcbiAgICByZWdpb24gPSBvcHRpb25zLnJlZ2lvbiA/IEByZWdpb25cblxuICAgICMgQFRPRE8gb3B0aW9ucyB0eXBlIGNoZWNrXG4gICAgdW5sZXNzIGtleSBhbmQgYnVja2V0XG4gICAgICByZXR1cm4gY2IgbmV3IEVycm9yICdrZXkgYW5kIGJ1Y2tldCBhcmUgcmVxdWlyZWQnXG5cbiAgICBpZiBleHRlbnNpb25cbiAgICAgIGNvbnRlbnRUeXBlID0gQF9jaGVja0RhdGFFeHRlbnNpb24gZXh0ZW5zaW9uXG4gICAgICByZXR1cm4gY2IgbmV3IEVycm9yICdEYXRhIGV4dGVuc2lvbiBub3QgYWxsb3dlZCcgdW5sZXNzIGNvbnRlbnRUeXBlXG5cbiAgICBpZiBhbGdvcml0aG0uc3BsaXQoJy0nKS5sZW5ndGggPT0gM1xuICAgICAgYXJyQWxnb3JpdGhtID0gYWxnb3JpdGhtLnNwbGl0KCctJylcbiAgICAgIHNpZ3ZlciA9IGFyckFsZ29yaXRobVswXVxuICAgICAgaGFzaGFsZyA9IGFyckFsZ29yaXRobVsyXS50b0xvd2VyQ2FzZSgpXG4gICAgZWxzZVxuICAgICAgc2lndmVyID0gXCJBV1M0XCJcbiAgICAgIGhhc2hhbGcgPSBcInNoYTI1NlwiXG5cbiAgICBwb2xpY3lEb2MgPSB7fVxuXG4gICAgcG9saWN5RG9jW1wiZXhwaXJhdGlvblwiXSA9IG1vbWVudC51dGMoZXhwaXJlcykuZm9ybWF0KFwiWVlZWS1NTS1ERFtUXUhIOk1NOlNTW1pdXCIpIGlmIGV4cGlyZXMgYW5kIF8uaXNEYXRlIGV4cGlyZXNcbiAgICBwb2xpY3lEb2NbXCJjb25kaXRpb25zXCJdID0gW11cblxuICAgIGRhdGVTaG9ydFBvbGljeSA9IG1vbWVudC51dGMoKS5mb3JtYXQoJ1lZWVlNTUREJylcbiAgICBkYXRlTG9uZ1BvbGljeSA9IG1vbWVudC51dGMoKS5mb3JtYXQoJ1lZWVlNTUREW1RdSEhNTVNTW1pdJylcblxuICAgIHBvbGljeURvYy5jb25kaXRpb25zLnB1c2ggeyAnYnVja2V0JzogYnVja2V0IH1cbiAgICBwb2xpY3lEb2MuY29uZGl0aW9ucy5wdXNoIFsgJ3N0YXJ0cy13aXRoJywgJyRrZXknLCBrZXkgXVxuICAgIHBvbGljeURvYy5jb25kaXRpb25zLnB1c2ggeyAnYWNsJzogYWNsIH1cbiAgICBwb2xpY3lEb2MuY29uZGl0aW9ucy5wdXNoIFsgJ3N0YXJ0cy13aXRoJywgJyRDb250ZW50LVR5cGUnLCBjb250ZW50VHlwZSBdIGlmIGNvbnRlbnRUeXBlXG4gICAgcG9saWN5RG9jLmNvbmRpdGlvbnMucHVzaCBbICdjb250ZW50LWxlbmd0aC1yYW5nZScsIDAsIGNvbnRlbnRMZW5ndGggXSBpZiBjb250ZW50TGVuZ3RoXG4gICAgcG9saWN5RG9jLmNvbmRpdGlvbnMucHVzaCB7IFwieC1hbXotYWxnb3JpdGhtXCI6IGFsZ29yaXRobSB9XG4gICAgcG9saWN5RG9jLmNvbmRpdGlvbnMucHVzaCB7IFwieC1hbXotY3JlZGVudGlhbFwiOiBcIiN7QGFjY2Vzc0tleUlkfS8je2RhdGVTaG9ydFBvbGljeX0vI3tyZWdpb259L3MzL2F3czRfcmVxdWVzdFwiIH1cbiAgICBwb2xpY3lEb2MuY29uZGl0aW9ucy5wdXNoIHsgXCJ4LWFtei1kYXRlXCI6IGRhdGVMb25nUG9saWN5fVxuXG4gICAgZGF0ZUtleSA9IGNyeXB0by5jcmVhdGVIbWFjKGhhc2hhbGcsIFwiI3tzaWd2ZXJ9I3tAc2VjcmV0QWNjZXNzS2V5fVwiKS51cGRhdGUoZGF0ZVNob3J0UG9saWN5KS5kaWdlc3QoKVxuICAgIGRhdGVSZWdpb25LZXkgPSBjcnlwdG8uY3JlYXRlSG1hYyhoYXNoYWxnLCBkYXRlS2V5KS51cGRhdGUocmVnaW9uKS5kaWdlc3QoKVxuICAgIGRhdGVSZWdpb25TZXJ2aWNlS2V5ID0gY3J5cHRvLmNyZWF0ZUhtYWMoaGFzaGFsZywgZGF0ZVJlZ2lvbktleSkudXBkYXRlKCdzMycpLmRpZ2VzdCgpXG4gICAgc2lnbmluZ0tleSA9IGNyeXB0by5jcmVhdGVIbWFjKGhhc2hhbGcsIGRhdGVSZWdpb25TZXJ2aWNlS2V5KS51cGRhdGUoXCIje3NpZ3Zlci50b0xvd2VyQ2FzZSgpfV9yZXF1ZXN0XCIpLmRpZ2VzdCgpXG4gICAgcG9saWN5ID0gbmV3IEJ1ZmZlcihKU09OLnN0cmluZ2lmeShwb2xpY3lEb2MpKS50b1N0cmluZygnYmFzZTY0JylcbiAgICBzaWduYXR1cmUgPSBjcnlwdG8uY3JlYXRlSG1hYyhoYXNoYWxnLHNpZ25pbmdLZXkpLnVwZGF0ZShwb2xpY3kpLmRpZ2VzdCgnaGV4JylcblxuICAgIHN0cmVhbSA9IHt9XG4gICAgc3RyZWFtWydwYXJhbXMnXSA9XG4gICAgICBcImtleVwiOiBrZXlcbiAgICAgIFwiYWNsXCI6IGFjbFxuICAgICAgXCJ4LWFtei1hbGdvcml0aG1cIjogYWxnb3JpdGhtXG4gICAgICBcIngtYW16LWNyZWRlbnRpYWxcIjogXCIje0BhY2Nlc3NLZXlJZH0vI3tkYXRlU2hvcnRQb2xpY3l9LyN7cmVnaW9ufS9zMy8je3NpZ3Zlci50b0xvd2VyQ2FzZSgpfV9yZXF1ZXN0XCJcbiAgICAgIFwieC1hbXotZGF0ZVwiOiBkYXRlTG9uZ1BvbGljeVxuICAgICAgXCJwb2xpY3lcIjogcG9saWN5XG4gICAgICBcIngtYW16LXNpZ25hdHVyZVwiOiBzaWduYXR1cmVcbiAgICBzdHJlYW0ucGFyYW1zWydjb250ZW50LXR5cGUnXSA9IGNvbnRlbnRUeXBlIGlmIGNvbnRlbnRUeXBlXG4gICAgc3RyZWFtWydwdWJsaWNfdXJsJ10gPSBcImh0dHBzOi8vI3tidWNrZXR9LnMzLmFtYXpvbmF3cy5jb20vI3trZXl9XCJcbiAgICBzdHJlYW1bJ2Zvcm1fdXJsJ10gPSBcImh0dHBzOi8vI3tidWNrZXR9LnMzLmFtYXpvbmF3cy5jb20vXCJcblxuICAgIGNiIG51bGwsIHN0cmVhbVxuXG5cbiAgIyBTMy51cGxvYWRcbiAgdXBsb2FkOiAob3B0aW9ucyA9IHt9LCBjYikgLT5cbiAgICB0aHJvdyBuZXcgRXJyb3IgJ0NhbGxiYWNrIGlzIHJlcXVpcmVkJyB1bmxlc3MgY2JcbiAgICB7IGRhdGEsIGV4dGVuc2lvbiwga2V5LCBidWNrZXQsIGV4cGlyZXMsIGFjbCwgY29udGVudExlbmd0aCB9ID0gb3B0aW9uc1xuICAgIGRhdGEgPSBvcHRpb25zLmRhdGFcbiAgICBrZXkgPSBvcHRpb25zLmtleVxuICAgIGJ1Y2tldCA9IG9wdGlvbnMuYnVja2V0XG4gICAgZXh0ZW5zaW9uID0gb3B0aW9ucy5leHRlbnNpb24gPyBudWxsXG4gICAgZXhwaXJlcyA9IG9wdGlvbnMuZXhwaXJlcyA/IG51bGxcbiAgICBhY2wgPSBvcHRpb25zLmFjbCA/IG51bGxcbiAgICBjb250ZW50TGVuZ3RoID0gb3B0aW9ucy5jb250ZW50TGVuZ3RoID8gbnVsbFxuICAgIFxuICAgICMgQFRPRE8gb3B0aW9ucyB0eXBlIGNoZWNrXG4gICAgdW5sZXNzIGRhdGEgYW5kIGtleSBhbmQgYnVja2V0XG4gICAgICByZXR1cm4gY2IgbmV3IEVycm9yICdkYXRhLCBrZXkgYW5kIGJ1Y2tldCBhcmUgcmVxdWlyZWQnXG5cbiAgICBwYXJhbXMgPVxuICAgICAgQnVja2V0OiBidWNrZXRcbiAgICAgIEtleToga2V5XG4gICAgICBCb2R5OiBkYXRhXG5cbiAgICBpZiBleHRlbnNpb25cbiAgICAgIGNvbnRlbnRUeXBlID0gQF9jaGVja0RhdGFFeHRlbnNpb24gZXh0ZW5zaW9uXG4gICAgICByZXR1cm4gY2IgbmV3IEVycm9yICdEYXRhIGV4dGVuc2lvbiBub3QgYWxsb3dlZCcgdW5sZXNzIGNvbnRlbnRUeXBlXG4gICAgICBwYXJhbXNbXCJDb250ZW50VHlwZVwiXSA9IGNvbnRlbnRUeXBlXG5cbiAgICBwYXJhbXNbXCJFeHBpcmVzXCJdID0gbW9tZW50LnV0YyhleHBpcmVzKSBpZiBleHBpcmVzIGFuZCBfLmlzRGF0ZSBleHBpcmVzXG4gICAgcGFyYW1zW1wiQUNMXCJdID0gYWNsIGlmIGFjbFxuICAgIHBhcmFtc1tcIkNvbnRlbnRMZW5ndGhcIl0gPSBjb250ZW50TGVuZ3RoIGlmIGNvbnRlbnRMZW5ndGhcblxuICAgIEBzMy51cGxvYWQgcGFyYW1zLCAoZXJyLCBkYXRhKSAtPlxuICAgICAgcmV0dXJuIGNiIGVyciBpZiBlcnJcbiAgICAgIGNiIG51bGwsIFwiaHR0cHM6Ly8je2J1Y2tldH0uczMuYW1hem9uYXdzLmNvbS8je2tleX1cIlxuXG5cbiAgIyBTMy5wdXRPYmplY3RcbiAgcHV0OiAob3B0aW9ucyA9IHt9LCBjYikgLT5cbiAgICB0aHJvdyBuZXcgRXJyb3IgJ0NhbGxiYWNrIGlzIHJlcXVpcmVkJyB1bmxlc3MgY2JcbiAgICB7IGV4dGVuc2lvbiwga2V5LCBidWNrZXQsIGV4cGlyZXMsIGFjbCwgY29udGVudExlbmd0aCB9ID0gb3B0aW9uc1xuICAgIGtleSA9IG9wdGlvbnMua2V5XG4gICAgYnVja2V0ID0gb3B0aW9ucy5idWNrZXRcbiAgICBleHRlbnNpb24gPSBvcHRpb25zLmV4dGVuc2lvbiA/IG51bGxcbiAgICBleHBpcmVzID0gb3B0aW9ucy5leHBpcmVzID8gbnVsbFxuICAgIGFjbCA9IG9wdGlvbnMuYWNsID8gbnVsbFxuXG4gICAgIyBAVE9ETyBvcHRpb25zIHR5cGUgY2hlY2tcbiAgICB1bmxlc3Mga2V5IGFuZCBidWNrZXRcbiAgICAgIHJldHVybiBjYiBuZXcgRXJyb3IgJ2tleSBhbmQgYnVja2V0IGFyZSByZXF1aXJlZCdcblxuICAgIHBhcmFtcyA9XG4gICAgICBCdWNrZXQ6IGJ1Y2tldFxuICAgICAgS2V5OiBrZXlcblxuICAgIGlmIGV4dGVuc2lvblxuICAgICAgY29udGVudFR5cGUgPSBAX2NoZWNrRGF0YUV4dGVuc2lvbiBleHRlbnNpb25cbiAgICAgIHJldHVybiBjYiBuZXcgRXJyb3IgJ0RhdGEgZXh0ZW5zaW9uIG5vdCBhbGxvd2VkJyB1bmxlc3MgY29udGVudFR5cGVcbiAgICAgIHBhcmFtc1tcIkNvbnRlbnRUeXBlXCJdID0gY29udGVudFR5cGVcblxuICAgIHBhcmFtc1tcIkV4cGlyZXNcIl0gPSBtb21lbnQudXRjKGV4cGlyZXMpIGlmIGV4cGlyZXMgYW5kIF8uaXNEYXRlIGV4cGlyZXNcbiAgICBwYXJhbXNbXCJBQ0xcIl0gPSBhY2wgaWYgYWNsXG5cbiAgICBAczMuZ2V0U2lnbmVkVXJsIFwicHV0T2JqZWN0XCIsIHBhcmFtcywgKGVyciwgZGF0YSkgLT5cbiAgICAgIHJldHVybiBjYiBlcnIgaWYgZXJyXG5cbiAgICAgIHB1dCA9XG4gICAgICAgICdzaWduZWRfdXJsJzogZGF0YVxuICAgICAgICAncHVibGljX3VybCc6IFwiaHR0cHM6Ly8je2J1Y2tldH0uczMuYW1hem9uYXdzLmNvbS8je2tleX1cIlxuXG4gICAgICBjYiBudWxsLCBwdXRcblxuXG4gICMgQ2hlY2sgZGF0YSB0eXBlIGZyb20gYXJyQWxsb3dlZERhdGFFeHRlbnNpb25zXG4gIF9jaGVja0RhdGFFeHRlbnNpb246IChkYXRhRXh0ZW5zaW9uKSAtPlxuICAgIHJldHVybiBmYWxzZSBpZiBub3QgZGF0YUV4dGVuc2lvbiBvciAoQGFyckFsbG93ZWREYXRhRXh0ZW5zaW9ucyBhbmQgZGF0YUV4dGVuc2lvbiBub3QgaW4gQGFyckFsbG93ZWREYXRhRXh0ZW5zaW9ucylcbiAgICByZXR1cm4gbWltZS5sb29rdXAgZGF0YUV4dGVuc2lvblxuXG5cbiAgIyBDaGVjayBhbGxvd2VkIGRhdGEgdHlwZXNcbiAgX2NoZWNrQWxsb3dlZERhdGFFeHRlbnNpb25zOiAoYXJyQWxsb3dlZERhdGFFeHRlbnNpb25zKSAtPlxuICAgIHJldHVybiBmYWxzZSB1bmxlc3MgYXJyQWxsb3dlZERhdGFFeHRlbnNpb25zXG5cbiAgICB1bmxlc3MgXy5pc0FycmF5IGFyckFsbG93ZWREYXRhRXh0ZW5zaW9uc1xuICAgICAgdGhyb3cgbmV3IEVycm9yIFwiQWxsb3dlZCBkYXRhIGV4dGVuc2lvbnMgbXVzdCBiZSBhcnJheSBvZiBzdHJpbmdzXCJcblxuICAgIGZvciBleHQgb2YgYXJyQWxsb3dlZERhdGFFeHRlbnNpb25zXG4gICAgICB1bmxlc3MgXy5pc1N0cmluZyBleHRcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yIFwiRXh0ZW5zaW9ucyBtdXN0IGJlIGEgc3RyaW5nc1wiXG5cbiAgICByZXR1cm4gdHJ1ZVxuXG5cbiAgIyBDaGVjayBvcHRpb25zIHBhcmFtc1xuICBfY2hlY2tPcHRpb25zOiAob3B0aW9ucyA9IHt9KSAtPlxuICAgIHtcbiAgICAgIEBhY2Nlc3NLZXlJZCwgQHNlY3JldEFjY2Vzc0tleSwgQHJlZ2lvbiwgQHNpZ25hdHVyZVZlcnNpb24sIEBtYXhSZXRyaWVzLCBAbWF4UmVkaXJlY3RzLCBAc3lzdGVtQ2xvY2tPZmZzZXQsXG4gICAgICBAc3NsRW5hYmxlZCwgQHBhcmFtVmFsaWRhdGlvbiwgQGNvbXB1dGVDaGVja3N1bXMsIEBjb252ZXJ0UmVzcG9uc2VUeXBlcywgQHMzRm9yY2VQYXRoU3R5bGUsIEBzM0J1Y2tldEVuZHBvaW50LFxuICAgICAgQGFwaVZlcnNpb24sIEBodHRwT3B0aW9ucywgQGFwaVZlcnNpb25zLCBAc2Vzc2lvblRva2VuLCBAY3JlZGVudGlhbHMsIEBjcmVkZW50aWFsUHJvdmlkZXIsIEBsb2dnZXJcbiAgICB9ID0gb3B0aW9uc1xuXG4gICAgdW5sZXNzIEBhY2Nlc3NLZXlJZFxuICAgICAgdGhyb3cgbmV3IEVycm9yIFwiYWNjZXNzS2V5SWQgaXMgcmVxdWlyZWRcIlxuXG4gICAgdW5sZXNzIEBzZWNyZXRBY2Nlc3NLZXlcbiAgICAgIHRocm93IG5ldyBFcnJvciBcInNlY3JldEFjY2Vzc0tleSBpcyByZXF1aXJlZFwiXG5cbiAgICB1bmxlc3MgQHJlZ2lvblxuICAgICAgdGhyb3cgbmV3IEVycm9yIFwicmVnaW9uIGlzIHJlcXVpcmVkXCJcblxuICAgIHVubGVzcyBfLmlzU3RyaW5nIEBhY2Nlc3NLZXlJZFxuICAgICAgdGhyb3cgbmV3IEVycm9yIFwiYWNjZXNzS2V5SWQgbXVzdCBiZSBhIHN0cmluZ1wiXG5cbiAgICB1bmxlc3MgXy5pc1N0cmluZyBAc2VjcmV0QWNjZXNzS2V5XG4gICAgICB0aHJvdyBuZXcgRXJyb3IgXCJzZWNyZXRBY2Nlc3NLZXkgbXVzdCBiZSBhIHN0cmluZ1wiXG5cbiAgICB1bmxlc3MgXy5pc1N0cmluZyBAcmVnaW9uXG4gICAgICB0aHJvdyBuZXcgRXJyb3IgXCJyZWdpb24gbXVzdCBiZSBhIHN0cmluZ1wiXG5cbiAgICBpZiBAc2lnbmF0dXJlVmVyc2lvbiBhbmQgbm90IF8uaXNTdHJpbmcgQHNpZ25hdHVyZVZlcnNpb25cbiAgICAgIHRocm93IG5ldyBFcnJvciBcInNpZ25hdHVyZVZlcnNpb24gbXVzdCBiZSBhIHN0cmluZ1wiXG5cbiAgICBpZiBAbWF4UmV0cmllcyBhbmQgbm90IF8uaXNJbnRlZ2VyIEBtYXhSZXRyaWVzXG4gICAgICB0aHJvdyBuZXcgRXJyb3IgJ21heFJldHJpZXMgbXVzdCBiZSBhIGludGVnZXInXG5cbiAgICBpZiBAbWF4UmVkaXJlY3RzIGFuZCBub3QgXy5pc0ludGVnZXIgQG1heFJlZGlyZWN0c1xuICAgICAgdGhyb3cgbmV3IEVycm9yICdtYXhSZWRpcmVjdHMgbXVzdCBiZSBhIGludGVnZXInXG5cbiAgICBpZiBAc3lzdGVtQ2xvY2tPZmZzZXQgYW5kIG5vdCBfLmlzTnVtYmVyIEBzeXN0ZW1DbG9ja09mZnNldFxuICAgICAgdGhyb3cgbmV3IEVycm9yICdzeXN0ZW1DbG9ja09mZnNldCBtdXN0IGJlIGEgbnVtYmVyJ1xuXG4gICAgaWYgQHNzbEVuYWJsZWQgYW5kIG5vdCBfLmlzQm9vbGVhbiBAc3NsRW5hYmxlZFxuICAgICAgdGhyb3cgbmV3IEVycm9yICdzc2xFbmFibGVkIG11c3QgYmUgYSBib29sZWFuJ1xuXG4gICAgaWYgQHBhcmFtVmFsaWRhdGlvbiBhbmQgbm90IF8uaXNCb29sZWFuIEBwYXJhbVZhbGlkYXRpb25cbiAgICAgIHRocm93IG5ldyBFcnJvciAncGFyYW1WYWxpZGF0aW9uIG11c3QgYmUgYSBib29sZWFuJ1xuXG4gICAgaWYgQGNvbXB1dGVDaGVja3N1bXMgYW5kIG5vdCBfLmlzQm9vbGVhbiBAY29tcHV0ZUNoZWNrc3Vtc1xuICAgICAgdGhyb3cgbmV3IEVycm9yICdjb21wdXRlQ2hlY2tzdW1zIG11c3QgYmUgYSBib29sZWFuJ1xuXG4gICAgaWYgQGNvbnZlcnRSZXNwb25zZVR5cGVzIGFuZCBub3QgXy5pc0Jvb2xlYW4gQGNvbnZlcnRSZXNwb25zZVR5cGVzXG4gICAgICB0aHJvdyBuZXcgRXJyb3IgJ2NvbnZlcnRSZXNwb25zZVR5cGVzIG11c3QgYmUgYSBib29sZWFuJ1xuXG4gICAgaWYgQHMzRm9yY2VQYXRoU3R5bGUgYW5kIG5vdCBfLmlzQm9vbGVhbiBAczNGb3JjZVBhdGhTdHlsZVxuICAgICAgdGhyb3cgbmV3IEVycm9yICdzM0ZvcmNlUGF0aFN0eWxlIG11c3QgYmUgYSBib29sZWFuJ1xuXG4gICAgaWYgQHMzQnVja2V0RW5kcG9pbnQgYW5kIG5vdCBfLmlzQm9vbGVhbiBAczNCdWNrZXRFbmRwb2ludFxuICAgICAgdGhyb3cgbmV3IEVycm9yICdzM0J1Y2tldEVuZHBvaW50IG11c3QgYmUgYSBib29sZWFuJ1xuXG4gICAgaWYgQGh0dHBPcHRpb25zIGFuZCBub3QgXy5pc1BsYWluT2JqZWN0IEBodHRwT3B0aW9uc1xuICAgICAgdGhyb3cgbmV3IEVycm9yICdodHRwT3B0aW9ucyBtdXN0IGJlIGEgZGljdCB3aXRoIHBhcmFtczogcHJveHksIGFnZW50LCB0aW1lb3V0LCB4aHJBc3luYywgeGhyV2l0aENyZWRlbnRpYWxzJ1xuXG4gICAgaWYgQGFwaVZlcnNpb25zIGFuZCBub3QgXy5pc1BsYWluT2JqZWN0IEBhcGlWZXJzaW9uc1xuICAgICAgdGhyb3cgbmV3IEVycm9yICdhcGlWZXJzaW9ucyBtdXN0IGJlIGEgZGljdCB3aXRoIHZlcnNpb25zJ1xuXG4gICAgaWYgQGFwaVZlcnNpb24gYW5kIG5vdCAoXy5pc1N0cmluZyBAYXBpVmVyc2lvbiBvciBfLmlzRGF0ZSBAYXBpVmVyc2lvbilcbiAgICAgIHRocm93IG5ldyBFcnJvciAnYXBpVmVyc2lvbiBtdXN0IGJlIGEgc3RyaW5nIG9yIGRhdGUnXG5cbiAgICBpZiBAc2Vzc2lvblRva2VuIGFuZCBub3QgQHNlc3Npb25Ub2tlbiBpbnN0YW5jZW9mIGF3cy5DcmVkZW50aWFsc1xuICAgICAgdGhyb3cgbmV3IEVycm9yICdzZXNzaW9uVG9rZW4gbXVzdCBiZSBhIEFXUy5DcmVkZW50aWFscydcblxuICAgIGlmIEBjcmVkZW50aWFscyBhbmQgbm90IEBjcmVkZW50aWFscyBpbnN0YW5jZW9mIGF3cy5DcmVkZW50aWFsc1xuICAgICAgdGhyb3cgbmV3IEVycm9yICdjcmVkZW50aWFscyBtdXN0IGJlIGEgQVdTLkNyZWRlbnRpYWxzJ1xuXG4gICAgaWYgQGNyZWRlbnRpYWxQcm92aWRlciBhbmQgbm90IEBjcmVkZW50aWFsUHJvdmlkZXIgaW5zdGFuY2VvZiBhd3MuQ3JlZGVudGlhbHNQcm92aWRlckNoYWluXG4gICAgICB0aHJvdyBuZXcgRXJyb3IgJ2NyZWRlbnRpYWxQcm92aWRlciBtdXN0IGJlIGEgQVdTLkNyZWRlbnRpYWxzUHJvdmlkZXJDaGFpbidcblxuICAgIGlmIEBsb2dnZXIgYW5kIG5vdCAoQGxvZ2dlci53cml0ZSBhbmQgQGxvZ2dlci5sb2cpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IgJ2xvZ2dlciBtdXN0IGhhdmUgI3dyaXRlIG9yICNsb2cgbWV0aG9kcydcblxuXG4jIEV4cG9ydHNcbm1vZHVsZS5leHBvcnRzID0gUzNDbGllbnRcblxuIl19
