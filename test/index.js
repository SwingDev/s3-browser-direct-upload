var _, assert, chai, expect, fs, moment, path, s3BrowserUpload, sinon, sinonChai;

_ = require('lodash');

fs = require('fs');

moment = require('moment');

chai = require('chai');

path = require('path');

sinon = require('sinon');

sinonChai = require('sinon-chai');

assert = chai.assert;

expect = chai.expect;

chai.use(sinonChai);

s3BrowserUpload = require('../lib');

describe('s3-uploadPostForm tests', function() {
  describe('#uploadPostForm tests', function() {
    var s3client;
    s3client = null;
    before(function() {
      return s3client = new s3BrowserUpload({
        accessKeyId: 'rHiziprP5FLOL5DpLaRc',
        secretAccessKey: 'dGudXJxDvtgZ2oRvzuMY1uWA/tsziUXwkd3tnJBk',
        signatureVersion: "v4",
        region: "eu-central-1"
      });
    });
    return it('should return json with all parameters required to build a form', function(done) {
      var uploadPostFormOptions;
      uploadPostFormOptions = {
        key: "testKey.jpg",
        bucket: 'testBucket',
        expires: moment().add(60, 'minutes').toDate(),
        extension: 'jpg'
      };
      return s3client.uploadPostForm(uploadPostFormOptions, function(err, params) {
        expect(params).to.have.deep.property('params.key');
        expect(params).to.have.deep.property('params.acl');
        expect(params).to.have.deep.property('params.content-type');
        expect(params).to.have.deep.property('params.x-amz-algorithm');
        expect(params).to.have.deep.property('params.x-amz-credential');
        expect(params).to.have.deep.property('params.x-amz-date');
        expect(params).to.have.deep.property('params.policy');
        expect(params).to.have.deep.property('params.x-amz-signature');
        expect(params).to.have.deep.property('public_url');
        expect(params).to.have.deep.property('form_url');
        return done();
      });
    });
  });
  describe('#upload tests', function() {
    var s3client;
    s3client = null;
    before(function() {
      s3client = new s3BrowserUpload({
        accessKeyId: 'rHiziprP5FLOL5DpLaRc',
        secretAccessKey: 'dGudXJxDvtgZ2oRvzuMY1uWA/tsziUXwkd3tnJBk',
        signatureVersion: "v4",
        region: "eu-central-1"
      });
      return sinon.stub(s3client.s3, 'upload', function(params, cb) {
        return cb();
      });
    });
    after(function() {
      return s3client.s3.upload.restore();
    });
    return it('should return url of uploaded file', function(done) {
      var uploadOptions;
      uploadOptions = {
        data: "String Object data",
        key: "testKey.txt",
        bucket: 'testBucket',
        extension: 'txt',
        acl: 'public-read'
      };
      return s3client.upload(uploadOptions, function(err, url) {
        expect(url).to.exists;
        expect(url).to.equal('https://testBucket.s3.amazonaws.com/testKey.txt');
        return done();
      });
    });
  });
  return describe('#put tests', function() {
    var s3client;
    s3client = null;
    before(function() {
      s3client = new s3BrowserUpload({
        accessKeyId: 'rHiziprP5FLOL5DpLaRc',
        secretAccessKey: 'dGudXJxDvtgZ2oRvzuMY1uWA/tsziUXwkd3tnJBk',
        signatureVersion: "v4",
        region: "eu-central-1"
      });
      return sinon.stub(s3client.s3, 'getSignedUrl', function(typeName, params, cb) {
        return cb(null, 'https://testBucket.s3.amazonaws.com/testKey.txt');
      });
    });
    after(function() {
      return s3client.s3.getSignedUrl.restore();
    });
    return it('should return json with signed and public urls', function(done) {
      var uploadOptions;
      uploadOptions = {
        key: "testKey.txt",
        bucket: 'testBucket',
        extension: 'txt',
        acl: 'public-read'
      };
      return s3client.put(uploadOptions, function(err, urls) {
        expect(urls).to.have.property('signed_url');
        expect(urls).to.have.property('public_url');
        return done();
      });
    });
  });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvaW5kZXguY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLElBQUEsNEVBQUE7O0FBQUEsQ0FBQSxHQUFjLE9BQUEsQ0FBUSxRQUFSLENBQWQsQ0FBQTs7QUFBQSxFQUNBLEdBQWMsT0FBQSxDQUFRLElBQVIsQ0FEZCxDQUFBOztBQUFBLE1BRUEsR0FBYyxPQUFBLENBQVEsUUFBUixDQUZkLENBQUE7O0FBQUEsSUFJQSxHQUFjLE9BQUEsQ0FBUSxNQUFSLENBSmQsQ0FBQTs7QUFBQSxJQUtBLEdBQWMsT0FBQSxDQUFRLE1BQVIsQ0FMZCxDQUFBOztBQUFBLEtBTUEsR0FBYyxPQUFBLENBQVEsT0FBUixDQU5kLENBQUE7O0FBQUEsU0FPQSxHQUFjLE9BQUEsQ0FBUSxZQUFSLENBUGQsQ0FBQTs7QUFBQSxNQVNBLEdBQVksSUFBSSxDQUFDLE1BVGpCLENBQUE7O0FBQUEsTUFVQSxHQUFZLElBQUksQ0FBQyxNQVZqQixDQUFBOztBQUFBLElBWUksQ0FBQyxHQUFMLENBQVMsU0FBVCxDQVpBLENBQUE7O0FBQUEsZUFhQSxHQUFrQixPQUFBLENBQVEsUUFBUixDQWJsQixDQUFBOztBQUFBLFFBaUJBLENBQVMseUJBQVQsRUFBb0MsU0FBQSxHQUFBO0FBRWxDLEVBQUEsUUFBQSxDQUFTLHVCQUFULEVBQWtDLFNBQUEsR0FBQTtBQUVoQyxRQUFBLFFBQUE7QUFBQSxJQUFBLFFBQUEsR0FBVyxJQUFYLENBQUE7QUFBQSxJQUVBLE1BQUEsQ0FBTyxTQUFBLEdBQUE7YUFDTCxRQUFBLEdBQWUsSUFBQSxlQUFBLENBQ2I7QUFBQSxRQUFBLFdBQUEsRUFBYSxzQkFBYjtBQUFBLFFBQ0EsZUFBQSxFQUFpQiwwQ0FEakI7QUFBQSxRQUVBLGdCQUFBLEVBQWtCLElBRmxCO0FBQUEsUUFHQSxNQUFBLEVBQVEsY0FIUjtPQURhLEVBRFY7SUFBQSxDQUFQLENBRkEsQ0FBQTtXQVNBLEVBQUEsQ0FBRyxpRUFBSCxFQUFzRSxTQUFDLElBQUQsR0FBQTtBQUNw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Q0FBeEMsRUFQSztJQUFBLENBQVAsQ0FGQSxDQUFBO0FBQUEsSUFZQSxLQUFBLENBQU0sU0FBQSxHQUFBO2FBQ0osUUFBUSxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsT0FBekIsQ0FBQSxFQURJO0lBQUEsQ0FBTixDQVpBLENBQUE7V0FlQSxFQUFBLENBQUcsZ0RBQUgsRUFBcUQsU0FBQyxJQUFELEdBQUE7QUFDbkQsVUFBQSxhQUFBO0FBQUEsTUFBQSxhQUFBLEdBQ0U7QUFBQSxRQUFBLEdBQUEsRUFBSyxhQUFMO0FBQUEsUUFDQSxNQUFBLEVBQVEsWUFEUjtBQUFBLFFBRUEsU0FBQSxFQUFXLEtBRlg7QUFBQSxRQUdBLEdBQUEsRUFBSyxhQUhMO09BREYsQ0FBQTthQU1BLFFBQVEsQ0FBQyxHQUFULENBQWEsYUFBYixFQUE0QixTQUFDLEdBQUQsRUFBTSxJQUFOLEdBQUE7QUFDMUIsUUFBQSxNQUFBLENBQU8sSUFBUCxDQUFZLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFyQixDQUE4QixZQUE5QixDQUFBLENBQUE7QUFBQSxRQUNBLE1BQUEsQ0FBTyxJQUFQLENBQVksQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQXJCLENBQThCLFlBQTlCLENBREEsQ0FBQTtlQUVBLElBQUEsQ0FBQSxFQUgwQjtNQUFBLENBQTVCLEVBUG1EO0lBQUEsQ0FBckQsRUFqQnFCO0VBQUEsQ0FBdkIsRUFoRWtDO0FBQUEsQ0FBcEMsQ0FqQkEsQ0FBQSIsImZpbGUiOiJ0ZXN0L2luZGV4LmpzIiwic291cmNlUm9vdCI6Ii9zb3VyY2UvIiwic291cmNlc0NvbnRlbnQiOlsiIyBzMy1icm93c2VyLWRpcmVjdC11cGxvYWRcbl8gICAgICAgICAgID0gcmVxdWlyZSgnbG9kYXNoJylcbmZzICAgICAgICAgID0gcmVxdWlyZSgnZnMnKVxubW9tZW50ICAgICAgPSByZXF1aXJlKCdtb21lbnQnKVxuXG5jaGFpICAgICAgICA9IHJlcXVpcmUoJ2NoYWknKVxucGF0aCAgICAgICAgPSByZXF1aXJlKCdwYXRoJylcbnNpbm9uICAgICAgID0gcmVxdWlyZSgnc2lub24nKVxuc2lub25DaGFpICAgPSByZXF1aXJlKCdzaW5vbi1jaGFpJylcblxuYXNzZXJ0ICAgID0gY2hhaS5hc3NlcnRcbmV4cGVjdCAgICA9IGNoYWkuZXhwZWN0XG5cbmNoYWkudXNlKHNpbm9uQ2hhaSlcbnMzQnJvd3NlclVwbG9hZCA9IHJlcXVpcmUoJy4uL2xpYicpXG5cblxuIyBURVNUU1xuZGVzY3JpYmUgJ3MzLXVwbG9hZFBvc3RGb3JtIHRlc3RzJywgKCkgLT5cblxuICBkZXNjcmliZSAnI3VwbG9hZFBvc3RGb3JtIHRlc3RzJywgKCkgLT5cblxuICAgIHMzY2xpZW50ID0gbnVsbFxuXG4gICAgYmVmb3JlIC0+XG4gICAgICBzM2NsaWVudCA9IG5ldyBzM0Jyb3dzZXJVcGxvYWRcbiAgICAgICAgYWNjZXNzS2V5SWQ6ICdySGl6aXByUDVGTE9MNURwTGFSYydcbiAgICAgICAgc2VjcmV0QWNjZXNzS2V5OiAnZEd1ZFhKeER2dGdaMm9Sdnp1TVkxdVdBL3RzemlVWHdrZDN0bkpCaydcbiAgICAgICAgc2lnbmF0dXJlVmVyc2lvbjogXCJ2NFwiXG4gICAgICAgIHJlZ2lvbjogXCJldS1jZW50cmFsLTFcIlxuXG4gICAgaXQgJ3Nob3VsZCByZXR1cm4ganNvbiB3aXRoIGFsbCBwYXJhbWV0ZXJzIHJlcXVpcmVkIHRvIGJ1aWxkIGEgZm9ybScsIChkb25lKSAtPlxuICAgICAgdXBsb2FkUG9zdEZvcm1PcHRpb25zID1cbiAgICAgICAga2V5OiBcInRlc3RLZXkuanBnXCJcbiAgICAgICAgYnVja2V0OiAndGVzdEJ1Y2tldCdcbiAgICAgICAgZXhwaXJlczogbW9tZW50KCkuYWRkKDYwLCAnbWludXRlcycpLnRvRGF0ZSgpXG4gICAgICAgIGV4dGVuc2lvbjogJ2pwZydcblxuICAgICAgczNjbGllbnQudXBsb2FkUG9zdEZvcm0gdXBsb2FkUG9zdEZvcm1PcHRpb25zLCAoZXJyLCBwYXJhbXMpIC0+XG4gICAgICAgIGV4cGVjdChwYXJhbXMpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSAncGFyYW1zLmtleSdcbiAgICAgICAgZXhwZWN0KHBhcmFtcykudG8uaGF2ZS5kZWVwLnByb3BlcnR5ICdwYXJhbXMuYWNsJ1xuICAgICAgICBleHBlY3QocGFyYW1zKS50by5oYXZlLmRlZXAucHJvcGVydHkgJ3BhcmFtcy5jb250ZW50LXR5cGUnXG4gICAgICAgIGV4cGVjdChwYXJhbXMpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSAncGFyYW1zLngtYW16LWFsZ29yaXRobSdcbiAgICAgICAgZXhwZWN0KHBhcmFtcykudG8uaGF2ZS5kZWVwLnByb3BlcnR5ICdwYXJhbXMueC1hbXotY3JlZGVudGlhbCdcbiAgICAgICAgZXhwZWN0KHBhcmFtcykudG8uaGF2ZS5kZWVwLnByb3BlcnR5ICdwYXJhbXMueC1hbXotZGF0ZSdcbiAgICAgICAgZXhwZWN0KHBhcmFtcykudG8uaGF2ZS5kZWVwLnByb3BlcnR5ICdwYXJhbXMucG9saWN5J1xuICAgICAgICBleHBlY3QocGFyYW1zKS50by5oYXZlLmRlZXAucHJvcGVydHkgJ3BhcmFtcy54LWFtei1zaWduYXR1cmUnXG4gICAgICAgIGV4cGVjdChwYXJhbXMpLnRvLmhhdmUuZGVlcC5wcm9wZXJ0eSAncHVibGljX3VybCdcbiAgICAgICAgZXhwZWN0KHBhcmFtcykudG8uaGF2ZS5kZWVwLnByb3BlcnR5ICdmb3JtX3VybCdcblxuICAgICAgICBkb25lKClcblxuICBkZXNjcmliZSAnI3VwbG9hZCB0ZXN0cycsICgpIC0+XG5cbiAgICBzM2NsaWVudCA9IG51bGxcblxuICAgIGJlZm9yZSAtPlxuICAgICAgczNjbGllbnQgPSBuZXcgczNCcm93c2VyVXBsb2FkXG4gICAgICAgIGFjY2Vzc0tleUlkOiAnckhpemlwclA1RkxPTDVEcExhUmMnXG4gICAgICAgIHNlY3JldEFjY2Vzc0tleTogJ2RHdWRYSnhEdnRnWjJvUnZ6dU1ZMXVXQS90c3ppVVh3a2QzdG5KQmsnXG4gICAgICAgIHNpZ25hdHVyZVZlcnNpb246IFwidjRcIlxuICAgICAgICByZWdpb246IFwiZXUtY2VudHJhbC0xXCJcblxuICAgICAgc2lub24uc3R1YiBzM2NsaWVudC5zMywgJ3VwbG9hZCcsIChwYXJhbXMsIGNiKSAtPlxuICAgICAgICBjYigpXG5cbiAgICBhZnRlciAtPlxuICAgICAgczNjbGllbnQuczMudXBsb2FkLnJlc3RvcmUoKVxuXG4gICAgaXQgJ3Nob3VsZCByZXR1cm4gdXJsIG9mIHVwbG9hZGVkIGZpbGUnLCAoZG9uZSkgLT5cbiAgICAgIHVwbG9hZE9wdGlvbnMgPVxuICAgICAgICBkYXRhOiBcIlN0cmluZyBPYmplY3QgZGF0YVwiXG4gICAgICAgIGtleTogXCJ0ZXN0S2V5LnR4dFwiXG4gICAgICAgIGJ1Y2tldDogJ3Rlc3RCdWNrZXQnXG4gICAgICAgIGV4dGVuc2lvbjogJ3R4dCdcbiAgICAgICAgYWNsOiAncHVibGljLXJlYWQnXG5cbiAgICAgIHMzY2xpZW50LnVwbG9hZCB1cGxvYWRPcHRpb25zLCAoZXJyLCB1cmwpIC0+XG4gICAgICAgIGV4cGVjdCh1cmwpLnRvLmV4aXN0c1xuICAgICAgICBleHBlY3QodXJsKS50by5lcXVhbCAnaHR0cHM6Ly90ZXN0QnVja2V0LnMzLmFtYXpvbmF3cy5jb20vdGVzdEtleS50eHQnXG4gICAgICAgIGRvbmUoKVxuXG4gIGRlc2NyaWJlICcjcHV0IHRlc3RzJywgKCkgLT5cblxuICAgIHMzY2xpZW50ID0gbnVsbFxuXG4gICAgYmVmb3JlIC0+XG4gICAgICBzM2NsaWVudCA9IG5ldyBzM0Jyb3dzZXJVcGxvYWRcbiAgICAgICAgYWNjZXNzS2V5SWQ6ICdySGl6aXByUDVGTE9MNURwTGFSYydcbiAgICAgICAgc2VjcmV0QWNjZXNzS2V5OiAnZEd1ZFhKeER2dGdaMm9Sdnp1TVkxdVdBL3RzemlVWHdrZDN0bkpCaydcbiAgICAgICAgc2lnbmF0dXJlVmVyc2lvbjogXCJ2NFwiXG4gICAgICAgIHJlZ2lvbjogXCJldS1jZW50cmFsLTFcIlxuXG4gICAgICBzaW5vbi5zdHViIHMzY2xpZW50LnMzLCAnZ2V0U2lnbmVkVXJsJywgKHR5cGVOYW1lLCBwYXJhbXMsIGNiKSAtPlxuICAgICAgICBjYihudWxsLCAnaHR0cHM6Ly90ZXN0QnVja2V0LnMzLmFtYXpvbmF3cy5jb20vdGVzdEtleS50eHQnKVxuXG4gICAgYWZ0ZXIgLT5cbiAgICAgIHMzY2xpZW50LnMzLmdldFNpZ25lZFVybC5yZXN0b3JlKClcblxuICAgIGl0ICdzaG91bGQgcmV0dXJuIGpzb24gd2l0aCBzaWduZWQgYW5kIHB1YmxpYyB1cmxzJywgKGRvbmUpIC0+XG4gICAgICB1cGxvYWRPcHRpb25zID1cbiAgICAgICAga2V5OiBcInRlc3RLZXkudHh0XCJcbiAgICAgICAgYnVja2V0OiAndGVzdEJ1Y2tldCdcbiAgICAgICAgZXh0ZW5zaW9uOiAndHh0J1xuICAgICAgICBhY2w6ICdwdWJsaWMtcmVhZCdcblxuICAgICAgczNjbGllbnQucHV0IHVwbG9hZE9wdGlvbnMsIChlcnIsIHVybHMpIC0+XG4gICAgICAgIGV4cGVjdCh1cmxzKS50by5oYXZlLnByb3BlcnR5ICdzaWduZWRfdXJsJ1xuICAgICAgICBleHBlY3QodXJscykudG8uaGF2ZS5wcm9wZXJ0eSAncHVibGljX3VybCdcbiAgICAgICAgZG9uZSgpXG5cblxuXG5cbiJdfQ==